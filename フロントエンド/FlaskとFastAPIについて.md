# what

- PythonのWebフレームワークであるFlaskとFastAPIについて調べた事やわかったことをまとめる

# Webフレームワークとは

- webサイトやWebアプリケーションを効率的に開発するための、あらかじめ共通的な機能をまとめた「枠組み」や「土台」となるソフトウェアのこと
    - 開発現場でよく利用される機能がひとまとめになったツール、という感じ
- 今回の場合は「PythonにおけるWebアプリケーションを作るための機能がまとめられたツール」という認識をしておくと良さそう?

# Flaskとは

[Welcome to Flask — Flask Documentation (3.1.x)](https://flask.palletsprojects.com/en/stable/)

- Pythonで開発された軽量なWebフレームワーク
    - WSGI製
        - Pythonに置いて、WebサーバーとWebアプリケーションを接続するための標準化されたインターフェイスノ定義

## 特徴

FastAPIと比較して簡単にはじめられるため、初心者でも学びやすい。

特定のツールやライブラリを必要とせず、コアな部分をシンプルに保ちつつ拡張性を高めることを目的として設定されている

- 軽量でシンプル:  最小限の機能を持っており、必要な機能は拡張ライブラリやプラグインで追加できる
- 学習コストの低さ: Pythonの基本的な知識があればすぐに始められる
- 柔軟性: プロジェクト構造や機能に関して制約が少なく、開発者が自由にカスタマイズできるため、様々なニーズに対応できる
- 大規模なコミュニティ: 利用者も多いため、豊富なリソースや拡張機能を利用できる、また、多くの開発者がコミュニティに参加しており、サポートや質問に対する回答が簡単に得ることが出来る

## サンプルコード

Flaskでリクエスト処理を行う際は以下のように記述する。

(HTTPのGETリクエストで送られた名前(name)を受け取り、リテラル文字列でHello, {name}!というメッセージを返すAPI)

```php
from flask import Flask, request

app = Flask(__name__)

@app.route('/hello',methods=['GET']
def hello():
	name = request.args.get('name','World')
	return f"Hello, {name}!"

if __name__ == '__main__':
	app.run(debug=True_

```

# FastAPIとは

[FastAPI](https://fastapi.tiangolo.com/ja/)

- pydanticライブラリでPythonに型定義の概念を取り入れながら、Python製のAPIを開発するWebフレームワーク
    - Flask同様に、軽量でモジュール化されている
- 文法もFlaskに類似しているので、Flaskを書き慣れている場合であれば学習コストはそこまで高くはない(らしい)

## 特徴

非同期処理に対応し、高パフォーマンスを提供することを目的として設計されている。

API開発に特化しており、データ検証や自動ドキュメント生成等の便利な機能が含まれている。

- 高いパフォーマンス: 非同期I/Oをサポートし、ASGIフレームワークであるStarletteをベースにしているため、高いパフォーマンスと並列性が実現できる
- 型ヒントとデータ検証: APIの入出力の型チェックや自動的なデータ検証が可能になり、エラーを減らすことが出来る
- 自動ドキュメント生成: FastAPIは、API定義に基づいて自動的にOpenAPIとJSON Schemaのドキュメントを生成する。Swagger UIやReDoc等のツールを使って、インタラクティブなAPIドキュメントを提供できる
- 学習コスト低さ: Pythonの知識があれば比較てように学習できる。また、Flaskと文法がにているため、Flaskを触ったことがあればより簡単に学習ができる

## サンプルコード

```php
from fastapi import FastAPI

app = FastAPI()

@app.get("/")
def read_root():
	return {"Hello":"World"}
	
@app.get("/items/{item_id}")
def read_item(item_id: int, q: str=None):
	return {"item_id": item_id, "q":q}
```

# 使い分けの場面や違い

双方「PythonでAPIを作る際によく上がる」という点では一緒。

ただし、場面や用途によって使い分けがでてくる。

## Flaskが最適な場面(お勧めな所)

- Web開発の基本的な仕組みを学びたい場合
- 小規模なWebサイトやAPIを作りたい場合
- 自由度の高い開発をしたい場合

## FastAPIが最適な場面

- 高速なAPIを開発したい場合
- 大規模なWebサービスやマイクロサービスを構築する場合
- APIのドキュメント作成を自動化したい場合

## パッと見比較表

| 特徴 | Flask | FastAPI |
| --- | --- | --- |
| コンセプト | マイクロフレームワーク、自由度が高い | 高速、モダン、API開発に特化 |
| 学習コスト | 初心者向け | 中級者向け |
| パフォーマンス | 中程度 | 高速 |
| 主な用途 | 小規模なWebサイト、シンプルなAPI | 高速なAPI, 大規模なWebサービス |
| ドキュメント | 手動で作成が必要 | 自動生成される |
| データ検証 | 拡張機能で対応 | 標準で強力な機能を提供 |