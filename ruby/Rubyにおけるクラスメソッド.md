# what
Rubyにおけるクラスメソッドについてわかったことなどを記載する。
また、Rubyにおけるスコープについてもここで記載する。


# インスタンスメソッドとクラスメソッド
クラスに作るメソッドには以下2種類が存在する
- インスタンスメソッド
- クラスメソッド
2つの違いは「インスタンスをレシーバとするメソッド」と「クラスをレシーバするメソッド」。

まずは表にそれぞれの違いをまとめてみる

|名前|定義方法|呼び出し方法|レシーバ|記法|
| --- | --- | --- | --- | --- |
| インスタンスメソッド | def メソッド名 | インスタンス.メソッド | インスタンス | クラス名#メソッド名 |
| クラスメソッド | def self.メソッド名 | クラス.メソッド | クラス | クラス名.メソッド名 |

### #記法と.記法
インスタンスメソッドは`クラス名#メソッド名`のように#記号を間に入れて書く。
例えば、`Drink#name`のようになる。

クラスメソッドは`クラス名.メソッド名`のように.記号を間に入れて書く。
また、クラスメソッドは::を間に入れて`Cafe::welcome`ともかく事ができる。

## インスタンスメソッド
レシーバ(.の書かれた、メソッドを呼び出すオブジェクト)がインスタンスであるメソッド。
配列のsizeメソッドや整数のeven?メソッド等もインスタンス変数である。

- インスタンスメソッドの例
```
drink.name
[1,2,3].size
1.even?
```


インスタンスメソッドは、インスタンスに対して呼び出す。以下の様なコードであれば、Drinkクラスのインスタンス(オブジェクト)に対してnameメソッドが呼び出されて、そのオブジェクトの@nameを返す。

```ruby
class Drink
    def initialize(name)
        @name = name
    end
    def name
        @name
    end
end

drink1 = Drink.name("カフェラテ")

puts drink1.name
```

## クラスメソッド
クラスメソッドはレシーバがクラスであるメソッド。
newメソッドとついているものはクラスメソッド。
クラスメソッドはクラスに対して呼び出す。例えば、Drink.newであれば、Drinkクラスのnewメソッドを呼び出すと、Drinkクラスのオブジェクトを作る仕事をする。

- クラスメソッドの例
```
Drink.new
Array.new
```


# 実際に触ってみる

```ruby
class Cafe
  def self.welcome
    "いらっしゃいませ"
  end
end

puts Cafe.welcome
```

実行結果
```
いらっしゃいませ
```

- クラスメソッドの定義

```ruby
def self.メソッド名
end
```

クラスメソッドを定義する際は、defのメソッド名を書くところで、メソッド名の前にself.をつける。
クラスメソッドを呼び出すときはCafe.welcomeのように、クラス名につづいて`.メソッド名`で呼び出すことができる。

## 同じクラスのクラスメソッドを呼び出す
クラスメソッドの中で同じクラスのクラスメソッドを呼ぶときは、インスタンスメソッドのときと同じように、メソッド名だけをかけばOK。
または、レシーバを省略しない形で書くと、self.クラスメソッドまたはクラス.クラスメソッドとなる。

```ruby
class Cafe
  def self.welcome
    "いらっしゃいませ"
  end
  def self.welcome_again
    welcome + "いつもありがとうございます!"
  end
end

puts Cafe.welcome_again
```

そして、インスタンスメソッドからクラスメソッドを呼ぶこともできる、
self.class.クラスメソッドもしくはクラス.クラスメソッドという書き方をする。
逆にクラスメソッドからインスタンスメソッドを呼び出すことはできない。クラスカrは、レシーバとなるインスタンスを決めることができないから。

### クラスメソッドの別の定義方法
クラスメソッドの定義は`def self.メソッド名`と記載したが、別の書き方も存在する。
`class << self`と書いてからメソッド名を定義する。この書き方は、複数のクラスメソッドをまとめて書く際に便利。

```ruby
class Cafe
  class << self
    def welcome
      "いらしゃいませ"
    end
  end
end

puts Cafe.welcome
```
