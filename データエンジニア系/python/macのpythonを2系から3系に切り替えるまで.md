※2018年頭頃に記載

# what
- macのpythonのバージョンが2系だったので3系に切り替える方法についてのメモ
- 2021-10: pyenv 2.0.0以降だとPATHの指定方法に変更があったので追記

# なぜかい
- 自分のコマンドシェルがzshなのが原因で少しめんどくさいことになったので

# 3系になるまで

## 環境
- OS: mac
- pythonのバージョン: 2.7.0
- python3のバージョン: 3.6.4
- コマンドシェル: zsh

## 素朴な疑問
### 普通にpython入れると`python -V` と`python3 -V`でそれぞれ違う系のpythonのバージョンが出てくるのはなぜ?
- python2とpython3は互換性がない部分がある
- python2向けに書いたコードはpython3だと実行できないことがあるので,2系と3系が同居してる状態になってる
- macはデフォルトで入ってるのがpython2なのでpython -V で出てくるのがpython2系になってる

らしい(多分違うかも)

### `python`の時に3系が実行されるようにするとどうなるのか
- mac内の他で動いてるプログラムが動かなくなる可能性(python2だと思ってたら3とか)
があるのであまりおすすめしない、ということらしい

なので、pythonのバージョンを切り替える事のできるツールなどがないか調査した所、`pyenv`なるものがあったので利用してみる

## pyenvを入れる
- pyenv...pythonのバージョン管理をおこなうコマンドラインツール
    - 様々なバージョンのpythonを切り替えることが出来る
- homebrewを使ってインストール
```ターミナル
brew install pyenv
```
- その後、~/.bash_profileに以下を追加する。

```
export PATH="$PYENV_ROOT/bin:$PATH"
export PYENV_ROOT="$HOME/.pyenv"
eval "$(pyenv init --path)"
```

- 追加したら、変数を反映させる。
```
source .bash_profile
```

- 反映後、以下のコマンドでバージョンが表示されたら問題なくインストールできている。
```
pyenv -v
```

## pythonのバージョンを切り替える

### ほしいバージョンのpythonをインストールする

```
pyenv install --list      <- インストール出来るバージョンを確認
pyenv install 3.6.4　<- 最新のバージョンが3.6.4だったのでインストール
```

### バージョンを切り替える

- Pythonバージョンを切り替えるときは、`pyenv global`と`pyenv local`を使用する

```
pyenv global 3.6.4
```
のようにすれば、Python全体が切り替わる。
または、特定のフォルダに移動した状態で、

```
pyenv local 3.6.4
```

のようにすればそのフォルダ以下にいる時だけ指定したバージョンを使用できる。


## ここまでは良かった
- 普通に切り替わっていたし、3系も普通に使えていた
- しかし、**新しくターミナルを立ち上げると2系のバージョンになっていて切り替わっていなかった**

またpathか??

と思い、下記のサイトなどを試してみたが、うまくいかなかった
https://qiita.com/koooooo/items/b21d87ffe2b56d0c589b#pyenv%E3%81%A7%E3%81%AEpython%E3%81%AE%E3%83%90%E3%83%BC%E3%82%B8%E3%83%A7%E3%83%B3%E3%81%8Cpython--v%E3%81%A8%E9%81%95%E3%81%86%E6%99%82%E3%81%AE%E5%AF%BE%E5%87%A6%E6%B3%95

## 解決まで
- 気になったのは`bash`での設定がうまく効いていない事
- そもそも、今自分が使っているのは`bash`だったか？
    - 使っていたのはzshだ
    - 設定する所違うのでは?？
- zsh側で設定しないと効かないのでは…?

### zsh側で変更する
- `~/.zshrc`に`~/.bash_profile`に追加した内容と同じものを記述
- ターミナルを立ち上げても3系のバージョンになっていた
- 解決


## なぜこうなっていたのか
- zshとbashではそれぞれ読み込まれる設定ファイルが違う
    - 自分がメインで使っている側の設定ファイルに設定する必要があった
- Qiitaで載っている記事などは「`bash`」を利用してる側の方法が多い
    - zshを使ってる状態で設定してもうまく効かなかった

## まとめ
- 自分の使っているコマンドシェルはちゃんと確認しよう
